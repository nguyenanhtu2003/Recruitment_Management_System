<%- include('../components/header.view.ejs') %> <%-
include('../components/navbar.page.view.ejs') %>
<link rel="stylesheet" href="../assets/css/candidate_login.css" />
<section class="user-area ptb-70">
  <div class="container container-xxl">
    <div class="row">
      <div class="col-xl-6 col-lg-8 col-12 offset-xl-3 offset-lg-2">
        <div class="user-form-content log-in-50">
          <h3>Đăng nhập dành cho ứng viên</h3>
          <div class="user-form">
            <div class="row">
              <div class="col-md-6 col-12">
                <a href="#" class="or-login"
                  ><img
                    class="auth-form__with--img"
                    src="https://d3hi6wehcrq5by.cloudfront.net/img/logo-auth-facebook.svg?v=1685350043"
                    alt=""
                  />
                  Login with Facebook
                </a>
              </div>
              <div class="col-md-6 col-12">
                <a href="#" class="or-login google"
                  ><img
                    class="auth-form__with--img"
                    src="https://d3hi6wehcrq5by.cloudfront.net/img/logo-auth-google.svg?v=1685350043"
                    alt=""
                  />
                  Login with Google
                </a>
              </div>
              <div class="col-12"><span class="or">Hoặc</span></div>
              <div class="col-12">
                <div class="form-group">
                  <label for="email"> Nhập email của bạn </label
                  ><input
                    type="email"
                    id="email"
                    name="email"
                    required
                    autofocus
                    value=""
                    autocomplete="email"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="col-12">
                <div class="form-group">
                  <label for="password">Mật khẩu</label
                  ><input
                    type="password"
                    id="password"
                    name="password"
                    class="form-control"
                    required
                    autocomplete="current-password"
                  />
                </div>
              </div>
              <div class="col-12">
                <div class="login-action">
                  <label for="login_remember" class="remember"
                    ><input
                      type="checkbox"
                      hidden
                      id="login_remember"
                      name="remember"
                    /><span class="remember-icon"
                      ><i class="fas fa-check"></i></span
                    ><span class="remember-text"> Lưu đăng nhập </span></label
                  ><span class="forgot-login"
                    ><a href="/password/reset"> Quên Mật Khẩu </a></span
                  >
                </div>
              </div>
              <div class="col-md-6 col-12 offset-md-3">
                <button class="default-btn" id="login" type="submit">Đăng nhập</button>
              </div>
              <div class="col-12">
                <p class="create">
                  Bạn không có tài khoản?
                  <a href="/register"> Đăng ký ngay </a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Gửi Data
  $("#login").on("click", function () {
    $.ajax({
      type: "POST",
      dataType: "JSON",
      url: "/login",
      data: {
        type: "login",
        email: $("#email").val(),
        password: $("#password").val(),
        isChecked: $("#login_remember").is(":checked"),
      },
      success: function (res) {
        console.log(res);
        Swal.fire({
          icon: res.status === true ? "success" : "error",
          title: "Thông Báo",
          text: res.message,
        }).then((result) => {
          if (res.status === true) {
            window.location.href = "/login";
          } else {
            window.location.href = "/register";
          }
        });
      },
      error: function (xhr, status, error) {
        console.error(error);
      },
    });
  });
</script>
<%- include('../components/footer.view.ejs') %>
